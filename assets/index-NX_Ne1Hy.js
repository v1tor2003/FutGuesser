var m=Object.defineProperty;var l=(o,t,e)=>t in o?m(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var i=(o,t,e)=>l(o,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();class g{constructor(t=2,e){i(this,"teams",[]);this.options=t,this.maxId=e}async start(){this.setTeams(await this.fetchMultipleTeams())}setTeams(t){this.teams=t}getTeams(){return this.teams}async fetchTeamData(t){const n=await fetch(`http://localhost:3000/api/v1/teams/${t}`);if(!n.ok)throw new Error(`Error fetching team: ${n.statusText}`);const s=await n.json();return{crest:s.crest,name:s.name}}async fetchMultipleTeams(){const t=[];for(;t.length<this.options;){const e=this.getRandomTeamId();try{const n=await this.fetchTeamData(e);t.find(s=>s.name===n.name)||t.push(n)}catch(n){console.log(n)}}return t}getRandomTeamId(){return Math.floor(Math.random()*this.maxId)}getRandomTeam(){const t=Math.floor(Math.random()*this.teams.length);return this.teams[t]}toString(){return this.teams.toString()}}const a=class a{constructor(t,e){i(this,"NOT_FOUND_URL","/404");i(this,"app");i(this,"homeUrl");i(this,"routes",new Set([{path:a.FILE_PREFIX+this.NOT_FOUND_URL,page:"<h1>404 Not Found</h1>"}]));this.app=document.getElementById(t),this.homeUrl=e||"/",this.initRouting()}initRouting(){window.addEventListener("hashchange",this.syncUrlHash.bind(this))}render(t){const e=this.routeExists(t)?t:a.FILE_PREFIX+this.NOT_FOUND_URL,n=this.retrievePage(e);n&&this.updateDom(n)}syncUrlHash(){let t=document.location.hash.split("#")[1];if(t===this.homeUrl)this.home();else if(t)this.render(a.FILE_PREFIX+t);else return}updateDom(t){this.app.innerHTML=t.trim()}routeExists(t){return this.getRoute(t)!==null}retrievePage(t){var e;return(e=this.getRoute(t))==null?void 0:e.page}redirect(t){window.location.hash=t}home(){return window.location.hash="",window.location.href="https://v1tor2003.github.io/FutGuesser",this}notFound(t){const e=this.getRoute(this.NOT_FOUND_URL);return this.routes.delete(e),this.NOT_FOUND_URL=t,this.add(t)}add(t){return t=a.FILE_PREFIX+t,this.fetchPage(t).then(e=>{this.routes.add({path:t,page:e}),this.syncUrlHash()}).catch(e=>console.error("Error adding route: ",e)),this}async fetchPage(t){const e=await fetch(t);if(!e.ok)throw new Error(`Failed to load HTML at '${t}: ${e.statusText}'`);return await e.text()}getRoute(t){for(const e of this.routes)if(e.path===t)return e;return null}toString(){return`Entry point:
${this.app.outerHTML}
Routes: Set(${this.routes.size})[${Array.from(this.routes).map(t=>`${t.path}, ${t.page}`).join(", ")}]`}};i(a,"FILE_PREFIX","/FutGuesser/pages");let d=a,c;document.addEventListener("DOMContentLoaded",async()=>{c=new d("app"),c.add("/tutorial.html").add("/game.html").add("/winner.html").add("/loser.html").notFound("/not-found.html"),f()});function f(){window.startGame=p}async function p(){c.redirect("/game.html");const o="1000",t=4,e=new g(t,o);await e.start();const n=e.getRandomTeam();await new Promise(s=>setTimeout(s,1e3)),y(n),I(e.getTeams()),await T(n.name)}function u(o,t){return o===t}function w(o){return o?c.redirect("/winner.html"):c.redirect("/loser.html")}function y(o){const t=document.getElementById("teamImg");document.getElementById("loadingImg").remove(),t.src=o.crest,t.style.opacity="1"}function I(o){const t=document.getElementById("optionsList");t.innerHTML="",o.forEach(e=>{const n=document.createElement("li");n.textContent=e.name,t.appendChild(n)})}function E(o){document.getElementById("optionsList").querySelectorAll("li").forEach(n=>{n.style.backgroundColor=u(o,n.textContent)?"green":"red"})}async function L(o,t){E(o),await new Promise(e=>setTimeout(e,500)),w(u(o,t))}async function T(o){document.getElementById("optionsList").addEventListener("click",async e=>{var s;const n=e.target;n.tagName==="LI"&&await L(o,((s=n.textContent)==null?void 0:s.trim())||"")})}
